---
title: "visualize survival"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(dplyr)
library(ggplot2)
library(tibble)
library(tidyr)
library(Hmisc)
library(ggforce)
library(forcats)
```

# load data

```{r}
surv.res <- read.csv("../data/survival_multivar-microbes.csv", stringsAsFactors = F)
```

# Format

```{r}
surv.plotin <- surv.res %>%
  mutate(nlogp = -log(p.value),
         logHR = log(hazard.ratio)) %>%
  filter(confint.high < Inf | confint.low > 0)
```

# Try volcano version

```{r}
surv.plotin %>%
  ggplot(aes(x = logHR, y = nlogp)) +
  geom_point() +
  geom_hline(yintercept = -log(0.05), lty = 2) +
  geom_vline(xintercept = 0, lty = 2) +
  labs(x = "log(HR)", y = "-log(p.value)") +
  theme_bw() 
ggsave("../figures/volcano_survival-multivariate.png")
```